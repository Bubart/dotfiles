#!/usr/bin/env bash

# Where is the DIR for dotfiles?
DOTFILES="${HOME}/.files"
CONFIG="${HOME}/.config"
TPM="${CONFIG}/tmux/plugins/tpm"

mkdir "${HOME}/Documents"
mkdir "${HOME}/Downloads"
mkdir "${HOME}/Desktop"
mkdir "${HOME}/Projects"
mkdir "${HOME}/OSs"
mkdir -p "${CONFIG}/hypr"
touch "${CONFIG}/hypr/monitors.conf"
touch "${CONFIG}/hypr/workspaces.conf"

# Clone dotfiles if we don't have it cloned yet
# Or update if we have it
[ -d "$DOTFILES" ] || git clone https://github.com/mxaddict/dotfiles.git "$DOTFILES"
pushd "$DOTFILES" || exit
git stash
git pull
git stash pop
stow --adopt .
fish -c "bat cache --build"
fish -c "curl -sL https://raw.githubusercontent.com/jorgebucaran/fisher/main/functions/fisher.fish | source && fisher update"
nvim --headless "+Lazy! update" +qa
popd || exit

# Clone tpm if we don't have it cloned yet
# Or update if we have it
[ -d "$TPM" ] || git clone https://github.com/tmux-plugins/tpm "$TPM"
pushd "$TPM" || exit
git pull
popd || exit
